<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Amith Naglapura - Portfolio</title>
<script src="https://cdn.tailwindcss.com"></script>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@600;700&family=Lato:wght@400;700&display=swap" rel="stylesheet">

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" xintegrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
<style>
body {
font-family: 'Lato', sans-serif;
background-color: #0d1117;
color: #c9d1d9;
overflow-x: hidden;
}
#galaxy-canvas {
position: fixed;
top: 0;
left: 0;
width: 100%;
height: 100%;
z-index: -1;
}
h1, h2, h3, h4, h5, h6 {
font-family: 'Poppins', sans-serif;
color: #f0f6fc;
}
.glassmorphism {
background: rgba(13, 17, 23, 0.6);
backdrop-filter: blur(12px);
border: 1px solid rgba(255, 255, 255, 0.1);
}
.highlight-text {
color: #f0f6fc;
}
.slide-in-section {
opacity: 0;
transform: translateY(50px);
transition: opacity 0.6s ease-out, transform 0.6s ease-out;
}
.slide-in-section.is-visible {
opacity: 1;
transform: translateY(0);
}
.card-hover {
background-color: rgba(31, 41, 55, 0.2);
border: 1px solid rgba(255, 255, 255, 0.1);
transition: transform 0.3s ease, background-color 0.3s ease, box-shadow 0.3s ease;
}
.card-hover:hover {
transform: translateY(-8px);
background-color: rgba(31, 41, 55, 0.4);
box-shadow: 0 0 20px rgba(200, 220, 255, 0.1);
}
.btn-primary {
background-color: #c9d1d9;
color: #0d1117;
font-weight: bold;
transition: all 0.3s ease;
}
.btn-primary:hover {
background-color: #f0f6fc;
transform: scale(1.05);
box-shadow: 0 0 20px rgba(240, 246, 252, 0.3);
}
.btn-secondary {
background-color: transparent;
border: 1px solid #30363d;
color: #c9d1d9;
transition: all 0.3s ease;
}
.btn-secondary:hover {
background-color: #161b22;
border-color: #8b949e;
}
.spinner {
border: 4px solid rgba(255, 255, 255, 0.2);
border-left-color: #c9d1d9;
border-radius: 50%;
width: 36px;
height: 36px;
animation: spin 1s linear infinite;
}
@keyframes spin {
to { transform: rotate(360deg); }
}
/* Modal Styles */
.modal-overlay {
position: fixed;
top: 0;
left: 0;
right: 0;
bottom: 0;
background: rgba(0, 0, 0, 0.7);
display: flex;
align-items: center;
justify-content: center;
z-index: 1000;
transition: opacity 0.3s ease;
}
.modal-content {
position: relative;
padding: 2rem;
width: 90%;
max-width: 1100px; /* Increased max-width for 3 columns */
max-height: 90vh;
overflow-y: auto;
transition: transform 0.3s ease;
}
/* Specific modal widths */
#admin-login-modal .modal-content,
#add-project-modal .modal-content {
    max-width: 650px;
}
.modal-overlay.hidden {
opacity: 0;
pointer-events: none;
}
.modal-overlay.hidden .modal-content {
transform: scale(0.95);
}
.modal-close {
position: absolute;
top: 1rem;
right: 1rem;
font-size: 1.5rem;
color: #9ca3af;
cursor: pointer;
transition: color 0.2s;
}
.modal-close:hover {
color: #f0f6fc;
}
/* Drag and Drop Area */
.drop-zone {
border: 2px dashed #30363d;
border-radius: 0.5rem;
padding: 2rem;
text-align: center;
cursor: pointer;
transition: border-color 0.3s, background-color 0.3s;
}
.drop-zone.dragover {
border-color: #58a6ff;
background-color: rgba(88, 166, 255, 0.1);
}
.drop-zone-preview {
max-width: 200px;
max-height: 125px;
margin: 1rem auto 0;
border-radius: 0.5rem;
}
.delete-project-btn {
position: absolute;
top: 0.5rem;
right: 0.5rem;
background: #4b0b0b;
color: #f87171;
border-radius: 50%;
width: 2rem;
height: 2rem;
display: flex;
align-items: center;
justify-content: center;
font-size: 0.9rem;
transition: all 0.2s ease;
border: 1px solid #f87171;
z-index: 10; /* Ensure it's above the image */
}
.delete-project-btn:hover {
background: #7f1d1d;
color: #fca5a5;
transform: scale(1.1);
}
</style>
</head>
<body class="antialiased">
<canvas id="galaxy-canvas"></canvas>

<!-- Header and Navigation -->
<header class="fixed top-0 left-0 right-0 z-50 transition-all duration-300" id="navbar">
<div class="container mx-auto px-4 py-4">
<div class="flex justify-between items-center glassmorphism rounded-full px-6 py-3 shadow-sm">
<a href="#" class="text-xl font-bold tracking-wider highlight-text">AN</a>
<nav class="hidden md:flex space-x-8 text-gray-400">
<a href="#home" class="hover:text-cyan-400 transition-colors">Home</a>
<a href="#ai-assistant" class="hover:text-cyan-400 transition-colors">AI Assistant</a>
<a href="#about" class="hover:text-cyan-400 transition-colors">About</a>
<a href="#skills" class="hover:text-cyan-400 transition-colors">Skills</a>
<a href="#experience" class="hover:text-cyan-400 transition-colors">Experience</a>
<a href="#projects" class="hover:text-cyan-400 transition-colors">Projects</a>
<a href="#contact" class="hover:text-cyan-400 transition-colors">Contact</a>
</nav>
<a href="mailto:amithnaglapura@gmail.com" class="hidden md:block btn-primary font-medium py-2 px-4 rounded-full">
Hire Me
</a>
<button id="mobile-menu-button" class="md:hidden text-2xl text-gray-300">
☰
</button>
</div>
</div>
<div id="mobile-menu" class="hidden md:hidden glassmorphism mx-4 rounded-lg shadow-lg">
<a href="#home" class="block text-center py-3 hover:bg-gray-800 rounded-t-lg">Home</a>
<a href="#ai-assistant" class="block text-center py-3 hover:bg-gray-800">AI Assistant</a>
<a href="#about" class="block text-center py-3 hover:bg-gray-800">About</a>
<a href="#skills" class="block text-center py-3 hover:bg-gray-800">Skills</a>
<a href="#experience" class="block text-center py-3 hover:bg-gray-800">Experience</a>
<a href="#projects" class="block text-center py-3 hover:bg-gray-800">Projects</a>
<a href="#contact" class="block text-center py-3 hover:bg-gray-800 rounded-b-lg">Contact</a>
</div>
</header>

<main class="container mx-auto px-4 pt-24 relative z-10">

<!-- Home Section -->
<section id="home" class="min-h-screen flex items-center justify-center text-center">
<div class="max-w-4xl">
<span class="text-cyan-400 font-semibold">Hi, my name is</span>
<h1 class="text-4xl md:text-6xl lg:text-7xl font-bold my-4 highlight-text">Amith Naglapura</h1>
<h2 class="text-4xl md:text-6xl lg:text-7xl font-bold text-gray-500">I build data-driven solutions.</h2>
<p class="mt-6 max-w-2xl mx-auto text-lg text-gray-400">
As a passionate technologist, I specialize in data analysis and creating data-driven applications. My expertise lies in transforming complex data into actionable insights and engineering solutions that bridge the gap between hardware and software.
</p>
<div class="mt-8 flex flex-wrap justify-center gap-4">
<a href="#projects" class="btn-primary font-bold py-3 px-6 rounded-full">
View My Work
</a>
<a href="https://github.com/AmithNaglapura" target="_blank" class="btn-secondary font-bold py-3 px-6 rounded-full">
GitHub Profile
</a>
</div>
</div>
</section>

<!-- AI Assistant Section -->
<section id="ai-assistant" class="py-20 md:py-32 text-center slide-in-section">
<h2 class="text-3xl md:text-4xl font-bold mb-4 highlight-text">
✨ AI Assistant
</h2>
<p class="max-w-2xl mx-auto text-lg mb-8 text-gray-400">
Want the highlights fast? Ask my AI assistant. It's trained on my skills, projects, and experience to answer your questions instantly.
<strong class="text-gray-300 block mt-2">Please note: The AI will only answer questions related to my professional profile.</strong>
</p>
<div class="max-w-2xl mx-auto">
<textarea id="question-input" rows="3" class="w-full p-4 rounded-lg bg-gray-800 border border-gray-700 focus:ring-2 focus:ring-cyan-500 focus:outline-none text-white placeholder-gray-500" placeholder="e.g., 'What was Amith's role at Schneider Electric?'"></textarea>
<button id="ask-ai-btn" class="mt-4 btn-primary font-bold py-3 px-8 rounded-full">
Ask AI Assistant
</button>
</div>
<div id="ai-response-output" class="mt-12 text-left max-w-3xl mx-auto hidden">
<div id="spinner-container" class="flex justify-center items-center h-40">
<div class="spinner"></div>
</div>
<div id="response-content" class="hidden glassmorphism rounded-lg p-8">
</div>
</div>
</section>

<!-- About Section -->
<section id="about" class="py-20 md:py-32 slide-in-section">
<h2 class="text-3xl md:text-4xl font-bold text-center mb-12 highlight-text">
About Me
</h2>
<div class="flex flex-col md:flex-row items-center gap-12 md:gap-16">
<div class="md:w-1/2 lg:w-2/5">
<img src="Amith.jpeg"
onerror="this.onerror=null;this.src='https://placehold.co/600x600/0d1117/c9d1d9?text=Amith+Naglapura';"
alt="A portrait of Amith Naglapura"
class="rounded-full shadow-2xl w-full h-auto object-cover aspect-square transform hover:scale-105 transition-transform duration-500 shadow-cyan-900/40">
</div>
<div class="md:w-1/2 lg:w-3/5">
<p class="text-lg mb-4 text-gray-400">
Hello! I'm Amith, a tech enthusiast from Mysore, India. I hold a Bachelor of Engineering from Vidyavardhaka College of Engineering. My academic background provided a solid foundation in hardware systems, which sparked a deeper curiosity about the data these systems generate, leading me to the world of data analysis and machine learning.
</p>
<p class="text-lg text-gray-400">
My goal is to apply my problem-solving skills to help businesses make smarter, data-informed decisions. I am driven by the challenge of turning technical possibilities into real-world value.
</p>
</div>
</div>
</section>

<!-- Skills Section -->
<section id="skills" class="py-20 md:py-32 slide-in-section">
<h2 class="text-3xl md:text-4xl font-bold text-center mb-16 highlight-text">
Professional Skillset
</h2>
<div class="max-w-4xl mx-auto grid grid-cols-1 md:grid-cols-2 gap-8">
<div class="rounded-lg p-6 card-hover">
<h3 class="text-xl font-bold mb-4 highlight-text">Technical Skills</h3>
<ul class="space-y-2 text-gray-400 grid grid-cols-2 gap-2">
<li class="flex items-center"><i class="fas fa-chart-line text-cyan-400 mr-3"></i>Data Analysis</li>
<li class="flex items-center"><i class="fas fa-brain text-cyan-400 mr-3"></i>Machine Learning</li>
<li class="flex items-center"><i class="fas fa-chart-pie text-cyan-400 mr-3"></i>Tableau</li>
<li class="flex items-center"><i class="fas fa-database text-cyan-400 mr-3"></i>SQL</li>
<li class="flex items-center"><i class="fab fa-python text-cyan-400 mr-3"></i>Python</li>
<li class="flex items-center"><i class="fas fa-microchip text-cyan-400 mr-3"></i>Embedded C, C++</li>
<li class="flex items-center"><i class="fab fa-r-project text-cyan-400 mr-3"></i>R</li>
<li class="flex items-center"><i class="fab fa-html5 text-cyan-400 mr-3"></i>HTML & CSS</li>
</ul>
</div>
<div class="rounded-lg p-6 card-hover">
<h3 class="text-xl font-bold mb-4 highlight-text">Professional Skills</h3>
<ul class="space-y-2 text-gray-400 grid grid-cols-2 gap-2">
<li class="flex items-center"><i class="fas fa-lightbulb text-cyan-400 mr-3"></i>Problem Solving</li>
<li class="flex items-center"><i class="fas fa-tasks text-cyan-400 mr-3"></i>Project Management</li>
<li class="flex items-center"><i class="fas fa-briefcase text-cyan-400 mr-3"></i>Business Analysis</li>
<li class="flex items-center"><i class="fas fa-users text-cyan-400 mr-3"></i>Leadership</li>
</ul>
</div>
</div>
</section>

<!-- Professional Experience Section -->
<section id="experience" class="py-20 md:py-32 slide-in-section">
<h2 class="text-3xl md:text-4xl font-bold text-center mb-16 highlight-text">
Professional Experience
</h2>
<div class="max-w-4xl mx-auto grid grid-cols-1 md:grid-cols-2 gap-8">
<div class="rounded-lg p-6 flex flex-col card-hover">
<div class="flex-grow">
<h3 class="text-xl font-bold mb-2 highlight-text">Current Leakage Detection System</h3>
<p class="text-sm text-gray-500 mb-2">Internship @ Schneider Electric</p>
<p class="text-gray-400 mb-4">Developed algorithms to analyze real-time data from electrical circuits, enhancing detection accuracy to ensure electrical safety and prevent potential hazards.</p>
</div>
<div class="mt-4 flex flex-wrap gap-2">
<span class="bg-gray-800 text-cyan-300 text-xs font-semibold px-2.5 py-0.5 rounded-full">IoT</span>
<span class="bg-gray-800 text-cyan-300 text-xs font-semibold px-2.5 py-0.5 rounded-full">Data Analysis</span>
<span class="bg-gray-800 text-cyan-300 text-xs font-semibold px-2.5 py-0.5 rounded-full">Python</span>
</div>
</div>
<div class="rounded-lg p-6 flex flex-col card-hover">
<div class="flex-grow">
<h3 class="text-xl font-bold mb-2 highlight-text">Data Analysis Intern</h3>
<p class="text-sm text-gray-500 mb-2">Internship @ Unified Mentor</p>
<p class="text-gray-400 mb-4">Utilized Python, Excel, and SQL for data manipulation, visualization, and interpretation. Analyzed diverse datasets to identify key trends and present actionable insights.</p>
</div>
<div class="mt-4 flex flex-wrap gap-2">
<span class="bg-gray-800 text-cyan-300 text-xs font-semibold px-2.5 py-0.5 rounded-full">SQL</span>
<span class="bg-gray-800 text-cyan-300 text-xs font-semibold px-2.5 py-0.5 rounded-full">Excel</span>
<span class="bg-gray-800 text-cyan-300 text-xs font-semibold px-2.5 py-0.5 rounded-full">Python</span>
</div>
</div>
</div>
</section>

<!-- My Projects Section -->
<section id="projects" class="py-20 md:py-32 slide-in-section">
<h2 class="text-3xl md:text-4xl font-bold text-center mb-16 highlight-text">
My Projects
</h2>
<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
<!-- Project Card 1 -->
<div class="rounded-lg p-6 flex flex-col card-hover">
<div class="flex-grow">
<h3 class="text-xl font-bold mb-2 highlight-text">Early Crop Disease Detection</h3>
<p class="text-sm text-gray-500 mb-2">Published Research Paper (IJFMR)</p>
<p class="text-gray-400 mb-4">Designed a machine learning framework to identify crop diseases early, minimizing crop damage and optimizing yield for better agricultural productivity.</p>
</div>
<div class="mt-4 flex flex-wrap gap-2">
<span class="bg-gray-800 text-cyan-300 text-xs font-semibold px-2.5 py-0.5 rounded-full">Machine Learning</span>
<span class="bg-gray-800 text-cyan-300 text-xs font-semibold px-2.5 py-0.5 rounded-full">Python</span>
</div>
</div>
<!-- Project Card 2 -->
<div class="rounded-lg p-6 flex flex-col card-hover">
<div class="flex-grow">
<h3 class="text-xl font-bold mb-2 highlight-text">Crack Detection in Pipelines</h3>
<p class="text-sm text-gray-500 mb-2">Academic Project</p>
<p class="text-gray-400 mb-4">Utilized advanced sensors and machine learning for the accurate, non-invasive detection of cracks in industrial pipelines.</p>
</div>
<div class="mt-4 flex flex-wrap gap-2">
<span class="bg-gray-800 text-cyan-300 text-xs font-semibold px-2.5 py-0.5 rounded-full">Machine Learning</span>
<span class="bg-gray-800 text-cyan-300 text-xs font-semibold px-2.5 py-0.5 rounded-full">Sensors</span>
</div>
</div>
<!-- Tableau Visualizations Card -->
<div class="rounded-lg p-6 flex flex-col card-hover">
<div class="flex-grow">
<h3 class="text-xl font-bold mb-2 highlight-text">Tableau Data Visualizations</h3>
<p class="text-sm text-gray-500 mb-2">Interactive Dashboards</p>
<p class="text-gray-400 mb-4">A collection of interactive dashboards that transform complex datasets into clear, actionable insights. Click below to explore them all.</p>
</div>
<button id="view-tableau-btn" class="mt-4 text-cyan-400 hover:text-cyan-300 font-semibold text-left">
Explore Visualizations &rarr;
</button>
</div>
</div>
</section>

<!-- Contact Section -->
<section id="contact" class="py-20 md:py-32 text-center slide-in-section">
<h2 class="text-3xl md:text-4xl font-bold mb-4 highlight-text">
Get In Touch
</h2>
<p class="max-w-xl mx-auto text-lg mb-8 text-gray-400">
I'm actively seeking roles where I can leverage my data analysis skills. If you're looking for a data-driven problem solver, I'd love to connect.
</p>
<a href="mailto:amithnaglapura@gmail.com?subject=Connecting from your Portfolio" class="btn-primary font-bold py-4 px-8 rounded-full">
Say Hello
</a>
</section>

</main>

<footer class="py-8 text-center text-gray-500 relative z-10">
<div class="flex justify-center items-center space-x-6 mb-4">
<a href="https://www.linkedin.com/in/amithnaglaupra" target="_blank" class="text-2xl hover:text-cyan-400 transition-colors">
<i class="fab fa-linkedin"></i>
</a>
<a href="https://github.com/AmithNaglapura" target="_blank" class="text-2xl hover:text-cyan-400 transition-colors">
<i class="fab fa-github"></i>
</a>
<a href="#" id="admin-login-btn" class="text-2xl hover:text-cyan-400 transition-colors" title="Admin Login">
<i class="fas fa-user-shield"></i>
</a>
</div>
<p>Designed & Built by Amith Naglapura</p>
<p>&copy; 2025. All rights reserved.</p>
</footer>

<!-- MODALS -->
<!-- Tableau Projects Modal -->
<div id="tableau-modal" class="modal-overlay hidden">
<div class="modal-content glassmorphism rounded-lg">
<span class="modal-close">&times;</span>
<h3 class="text-2xl font-bold mb-6 text-center highlight-text">Tableau Visualizations</h3>
<div id="tableau-projects-container" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
<!-- Projects will be dynamically inserted here -->
</div>
</div>
</div>

<!-- Admin Login Modal -->
<div id="admin-login-modal" class="modal-overlay hidden">
<div class="modal-content glassmorphism rounded-lg">
<span class="modal-close">&times;</span>
<h3 class="text-2xl font-bold mb-6 text-center highlight-text">Admin Access</h3>
<div class="space-y-4">
<div>
<label for="username" class="block text-sm font-medium text-gray-400">User Name</label>
<input type="text" id="username" class="mt-1 block w-full bg-gray-800 border border-gray-700 rounded-md shadow-sm py-2 px-3 text-white focus:outline-none focus:ring-cyan-500 focus:border-cyan-500" value="Amith" readonly>
</div>
<div>
    <label for="password" class="block text-sm font-medium text-gray-400">Password</label>
    <input type="password" id="password" class="mt-1 block w-full bg-gray-800 border border-gray-700 rounded-md shadow-sm py-2 px-3 text-white focus:outline-none focus:ring-cyan-500 focus:border-cyan-500" placeholder="Enter password">
</div>
<button id="login-submit-btn" class="w-full btn-primary font-bold py-2 px-4 rounded-full">Login</button>
<p class="text-xs text-gray-500 text-center mt-2">Note: This is a front-end simulation for demonstration purposes.</p>
</div>
</div>
</div>

<!-- Add New Project Modal -->
<div id="add-project-modal" class="modal-overlay hidden">
<div class="modal-content glassmorphism rounded-lg">
<span class="modal-close">&times;</span>
<h3 class="text-2xl font-bold mb-6 text-center highlight-text">Add New Tableau Project</h3>
<form id="add-project-form" class="space-y-4">
<div>
<label for="project-title" class="block text-sm font-medium text-gray-400">Project Title</label>
<input type="text" id="project-title" class="mt-1 block w-full bg-gray-800 border border-gray-700 rounded-md shadow-sm py-2 px-3 text-white focus:outline-none focus:ring-cyan-500 focus:border-cyan-500" required>
</div>
<div>
<label for="project-desc" class="block text-sm font-medium text-gray-400">Description</label>
<textarea id="project-desc" rows="3" class="mt-1 block w-full bg-gray-800 border border-gray-700 rounded-md shadow-sm py-2 px-3 text-white focus:outline-none focus:ring-cyan-500 focus:border-cyan-500" required></textarea>
</div>
<div>
<label for="project-url" class="block text-sm font-medium text-gray-400">Tableau Public URL</label>
<input type="url" id="project-url" class="mt-1 block w-full bg-gray-800 border border-gray-700 rounded-md shadow-sm py-2 px-3 text-white focus:outline-none focus:ring-cyan-500 focus:border-cyan-500" placeholder="https://public.tableau.com/views/..." required>
</div>
<div>
<label class="block text-sm font-medium text-gray-400">Thumbnail Image</label>
<div id="drop-zone" class="mt-1 drop-zone">
<p class="text-gray-500">Drag & drop an image here, or click to select</p>
<input type="file" id="project-thumbnail-input" class="hidden" accept="image/*">
<img id="thumbnail-preview" class="hidden drop-zone-preview" alt="Thumbnail preview">
</div>
</div>
<button type="submit" id="save-project-btn" class="w-full btn-primary font-bold py-2 px-4 rounded-full">Save Project</button>
<p id="success-message" class="text-green-400 text-center mt-2 hidden">Project added successfully!</p>
</form>
</div>
</div>


<script type="module">
    // Import Firebase modules
    import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
    import { getFirestore, collection, onSnapshot, addDoc, deleteDoc, doc } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";
    import { getAuth, signInAnonymously, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";

    // IMPORTANT: Replace with your actual Firebase configuration
    const firebaseConfig = {
        apiKey: "AIzaSyD7qvQX-TIgdhEh8oWD_hRNqFbJtU5TYeE",
        authDomain: "amith-np.firebaseapp.com",
        projectId: "amith-np",
        storageBucket: "amith-np.firebasestorage.app",
        messagingSenderId: "989434262632",
        appId: "1:989434262632:web:59a03bbf0468409fe637dd",
        measurementId: "G-Y0K0CV151E"
    };

    // Initialize Firebase
    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);
    const auth = getAuth(app);

    // --- Galaxy Animation ---
    const canvas = document.getElementById('galaxy-canvas');
    const ctx = canvas.getContext('2d');
    let particles = [];
    const numParticles = 400;

    function setCanvasSize() {
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
    }

    function createParticles() {
        particles = [];
        for (let i = 0; i < numParticles; i++) {
            particles.push({
                x: Math.random() * canvas.width,
                y: Math.random() * canvas.height,
                radius: Math.random() * 1.2 + 0.1,
                speedX: (Math.random() - 0.5) * 0.1,
                speedY: (Math.random() - 0.5) * 0.1,
                color: `rgba(200, 220, 255, ${0.5 + Math.random() * 0.5})`
            });
        }
    }

    function animate() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        particles.forEach(p => {
            p.x += p.speedX;
            p.y += p.speedY;
            if (p.x < 0) p.x = canvas.width;
            if (p.x > canvas.width) p.x = 0;
            if (p.y < 0) p.y = canvas.height;
            if (p.y > canvas.height) p.y = 0;
            ctx.beginPath();
            ctx.arc(p.x, p.y, p.radius, 0, Math.PI * 2);
            ctx.fillStyle = p.color;
            ctx.fill();
        });
        requestAnimationFrame(animate);
    }

    window.addEventListener('resize', () => {
        setCanvasSize();
        createParticles();
    });

    setCanvasSize();
    createParticles();
    animate();

    // --- Mobile menu toggle ---
    const mobileMenuButton = document.getElementById('mobile-menu-button');
    const mobileMenu = document.getElementById('mobile-menu');
    mobileMenuButton.addEventListener('click', () => {
        mobileMenu.classList.toggle('hidden');
    });
    const mobileMenuLinks = mobileMenu.getElementsByTagName('a');
    for (let link of mobileMenuLinks) {
        link.addEventListener('click', () => {
            mobileMenu.classList.add('hidden');
        });
    }

    // --- Navbar background on scroll ---
    const navbar = document.getElementById('navbar');
    window.addEventListener('scroll', () => {
        if (window.scrollY > 50) {
            navbar.classList.add('bg-black/50');
        } else {
            navbar.classList.remove('bg-black/50');
        }
    });

    // --- Scroll-triggered fade-in animation ---
    const sections = document.querySelectorAll('.slide-in-section');
    const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                entry.target.classList.add('is-visible');
            }
        });
    }, { threshold: 0.1 });
    sections.forEach(section => {
        observer.observe(section);
    });

    // --- DYNAMIC PROJECT & ADMIN LOGIC ---

    let isAdminLoggedIn = false;
    let newThumbnailData = null;
    let tableauProjects = [];
    const projectsCol = collection(db, 'tableauProjects');

    // --- Modal Management ---
    const tableauModal = document.getElementById('tableau-modal');
    const adminLoginModal = document.getElementById('admin-login-modal');
    const addProjectModal = document.getElementById('add-project-modal');
    const modals = [tableauModal, adminLoginModal, addProjectModal];

    function openModal(modal) {
        modal.classList.remove('hidden');
    }

    function closeModal(modal) {
        modal.classList.add('hidden');
    }

    modals.forEach(modal => {
        modal.querySelector('.modal-close').addEventListener('click', () => closeModal(modal));
        modal.addEventListener('click', (e) => {
            if (e.target === modal) {
                closeModal(modal);
            }
        });
    });

    // --- Tableau Projects Logic ---
    const viewTableauBtn = document.getElementById('view-tableau-btn');
    const tableauProjectsContainer = document.getElementById('tableau-projects-container');

    onSnapshot(projectsCol, (snapshot) => {
        tableauProjects = snapshot.docs.map(doc => ({ ...doc.data(), id: doc.id }));
        renderTableauProjects();
    });

    function renderTableauProjects() {
        tableauProjectsContainer.innerHTML = '';
        if (tableauProjects.length === 0) {
            tableauProjectsContainer.innerHTML = '<p class="text-center text-gray-500 col-span-full">No projects have been added yet.</p>';
            return;
        }
        tableauProjects.forEach((project) => {
            const projectEl = document.createElement('div');
            // UPDATED: Classes for a vertical card layout
            projectEl.className = 'relative rounded-lg bg-gray-900/50 border border-gray-700 flex flex-col h-full card-hover overflow-hidden';
            
            const deleteButtonHTML = isAdminLoggedIn 
                ? `<button class="delete-project-btn" data-id="${project.id}" title="Delete Project"><i class="fas fa-trash-alt pointer-events-none"></i></button>` 
                : '';

            // UPDATED: innerHTML for a vertical card layout
            projectEl.innerHTML = `
                ${deleteButtonHTML}
                <img src="${project.thumbnail}" alt="${project.title} thumbnail" class="w-full h-auto object-cover aspect-video" onerror="this.onerror=null;this.src='https://placehold.co/400x225/161b22/f0f6fc?text=Image+Not+Found';">
                <div class="p-4 flex flex-col flex-grow">
                    <h4 class="text-lg font-bold highlight-text">${project.title}</h4>
                    <p class="text-gray-400 my-2 text-sm flex-grow">${project.description}</p>
                    <a href="${project.url}" target="_blank" class="text-cyan-400 hover:text-cyan-300 font-semibold inline-block mt-2 self-start">View on Tableau Public &rarr;</a>
                </div>
            `;
            tableauProjectsContainer.appendChild(projectEl);
        });
    }

    viewTableauBtn.addEventListener('click', () => {
        renderTableauProjects();
        openModal(tableauModal);
    });

    tableauProjectsContainer.addEventListener('click', async function(e) {
        if (e.target.closest('.delete-project-btn')) {
            const button = e.target.closest('.delete-project-btn');
            const projectId = button.dataset.id;
            const projectToDelete = tableauProjects.find(p => p.id === projectId);
            if (confirm(`Are you sure you want to delete "${projectToDelete.title}"?`)) {
                await deleteDoc(doc(db, "tableauProjects", projectId));
            }
        }
    });


    // --- Admin Logic ---
    const adminLoginBtn = document.getElementById('admin-login-btn');
    const loginSubmitBtn = document.getElementById('login-submit-btn');
    const addProjectForm = document.getElementById('add-project-form');
    const dropZone = document.getElementById('drop-zone');
    const thumbnailInput = document.getElementById('project-thumbnail-input');
    const thumbnailPreview = document.getElementById('thumbnail-preview');

    adminLoginBtn.addEventListener('click', (e) => {
        e.preventDefault();
        openModal(adminLoginModal);
    });

    loginSubmitBtn.addEventListener('click', () => {
        const passwordInput = document.getElementById('password');
        const enteredPassword = passwordInput.value;
        const correctPassword = 'Amithnp@18'; // The correct password

        if (enteredPassword === correctPassword) {
            // On successful login
            isAdminLoggedIn = true;
            closeModal(adminLoginModal);
            openModal(addProjectModal);
            passwordInput.value = ''; // Clear the password field for security
            renderTableauProjects(); // Refresh the project view to show admin controls
        } else {
            // On failed login
            isAdminLoggedIn = false;
            alert('Incorrect password. Please try again.');
            passwordInput.value = ''; // Clear the incorrect password
        }
    });

    // Drag and Drop Logic
    dropZone.addEventListener('click', () => thumbnailInput.click());
    dropZone.addEventListener('dragover', (e) => {
        e.preventDefault();
        dropZone.classList.add('dragover');
    });
    dropZone.addEventListener('dragleave', () => {
        dropZone.classList.remove('dragover');
    });
    dropZone.addEventListener('drop', (e) => {
        e.preventDefault();
        dropZone.classList.remove('dragover');
        const files = e.dataTransfer.files;
        if (files.length > 0) {
            handleFile(files[0]);
        }
    });
    thumbnailInput.addEventListener('change', (e) => {
        const files = e.target.files;
        if (files.length > 0) {
            handleFile(files[0]);
        }
    });

    function handleFile(file) {
        if (file && file.type.startsWith('image/')) {
            const reader = new FileReader();
            reader.onload = (e) => {
                newThumbnailData = e.target.result;
                thumbnailPreview.src = newThumbnailData;
                thumbnailPreview.classList.remove('hidden');
            };
            reader.readAsDataURL(file);
        } else {
            alert('Please drop an image file.');
        }
    }

    addProjectForm.addEventListener('submit', async (e) => {
        e.preventDefault();
        const title = document.getElementById('project-title').value;
        const description = document.getElementById('project-desc').value;
        const url = document.getElementById('project-url').value;
        const successMessage = document.getElementById('success-message');

        if (!title || !description || !url || !newThumbnailData) {
            alert('Please fill out all fields and add a thumbnail.');
            return;
        }

        await addDoc(projectsCol, {
            title,
            description,
            url,
            thumbnail: newThumbnailData
        });

        addProjectForm.reset();
        thumbnailPreview.classList.add('hidden');
        newThumbnailData = null;

        successMessage.classList.remove('hidden');
        setTimeout(() => {
            successMessage.classList.add('hidden');
        }, 3000);
    });


    // --- Gemini AI Assistant ---
    const askBtn = document.getElementById('ask-ai-btn');
    const questionInput = document.getElementById('question-input');
    const aiResponseOutput = document.getElementById('ai-response-output');
    const spinnerContainer = document.getElementById('spinner-container');
    const responseContent = document.getElementById('response-content');

    askBtn.addEventListener('click', askAiAssistant);
    questionInput.addEventListener('keydown', function(event) {
        if (event.key === 'Enter' && !event.shiftKey) {
            event.preventDefault();
            askAiAssistant();
        }
    });

    async function askAiAssistant() {
        const userQuestion = questionInput.value;
        if (!userQuestion.trim()) {
            displayError('Please ask a question first.');
            return;
        }

        aiResponseOutput.classList.remove('hidden');
        spinnerContainer.classList.remove('hidden');
        responseContent.classList.add('hidden');
        askBtn.disabled = true;
        askBtn.textContent = 'Thinking...';

        const context = `
        Amith Naglapura's Professional Profile:
        - Summary: A technologist specializing in data analysis and machine learning.
        - Experience:
          - Schneider Electric (Intern): Developed algorithms for a 'Detecting Current Leakage' system.
          - Unified Mentor (Data Analysis Intern): Used Python, Excel, and SQL for data manipulation and visualization.
        - Key Projects:
          - Early Stage Crop Disease Detection (Research Paper): Used ML to detect crop diseases.
          - Crack Detection In Pipeline: Used sensors and ML for crack detection.
          - Tableau Data Visualizations: Creates interactive dashboards to tell data stories. The projects are viewable on his portfolio.
        - Skills: Data Analysis, Machine Learning, Tableau, SQL, Python, Embedded C/C++, R, HTML, CSS.
        `;

        const prompt = `You are a helpful AI assistant for Amith Naglapura's portfolio. Your answers must be based *only* on the context provided. If asked a question you cannot answer from the context, politely say you don't have that information and suggest a relevant question they could ask, like "What are his technical skills?".

        Context:
        ---
        ${context}
        ---

        User's Question: "${userQuestion}"`;
        
        const payload = {
            contents: [{ role: "user", parts: [{ text: prompt }] }]
        };

        const apiKey = "AIzaSyCmXt4_sh9o2Rxqg_56jPH0YThK5JCnhn4"; // The build environment provides the key
        const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=${apiKey}`;

        try {
            const response = await fetch(apiUrl, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(payload)
            });
            if (!response.ok) throw new Error(`API error: ${response.statusText}`);
            const result = await response.json();
            const text = result.candidates[0].content.parts[0].text;
            displayResponse(text);
        } catch (error) {
            console.error('Error calling Gemini API:', error);
            displayError('An error occurred. Please try again.');
        } finally {
            spinnerContainer.classList.add('hidden');
            askBtn.disabled = false;
            askBtn.textContent = 'Ask AI Assistant';
        }
    }

    function displayResponse(text) {
        let formattedText = text.replace(/- /g, '<br>- ').replace(/\* /g, '<br>• ');
        if (formattedText.startsWith('<br>')) {
            formattedText = formattedText.substring(4);
        }
        responseContent.innerHTML = `<p class="text-gray-300">${formattedText}</p>`;
        responseContent.classList.remove('hidden');
    }

    function displayError(message) {
        responseContent.innerHTML = `<p class="text-red-400 text-center">${message}</p>`;
        responseContent.classList.remove('hidden');
        aiResponseOutput.classList.remove('hidden');
    }
</script>
</body>
</html>
